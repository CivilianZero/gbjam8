pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
--main
function _init()
 t=0
 
 dirx={-1,1,0,0}
 diry={0,0,-1,1}
 
 unit_ani={32}
 unit_hp={}
 unit_atk={}
 
	menu_init()
end

function menu_init()
	_upd=update_menu
	_drw=draw_menu
end

function game_start()
 c_ani={1,3}
 cx=1
 cy=1
 
 slimes={}
 addslime(1,3,4)
 
	_upd=update_game
	_drw=draw_game
end
-->8
--update
function _update()
 t+=1
 _upd()
end

function update_menu()
	if (btn(❎)) game_start()
end

function update_game()
	for i=0,3 do
		if btnp(i) then
			cx+=dirx[i+1]
			cy+=diry[i+1]
		end
	end
end
-->8
--draw
function _draw()
 _drw()
end

function draw_menu()
 cls()
	print("press ❎ to start",31,63,7)
end

function draw_game()
	cls()
	map()
	for s in all(slimes) do
		drawspr(animate(s.ani),
		        s.x*16+s.sox,s.y*16+s.soy,
		        s.flip)
	end
	drawspr(
	 animate(c_ani),
	 cx*16,
	 cy*16,false)
end
-->8
--utility
function drawspr(_spr,_x,_y,_flip)
	palt(0,false)
	palt(1,true)
	spr(_spr,_x,_y,2,2,_flip)
	pal()
end

function animate(ani)
	return ani[flr(t/15)%#ani+1]
end
-->8
--slime
function addslime(typ,_x,_y)
	local s={
	 x=_x,
	 y=_y,
	 ox=0,
	 oy=0,
	 sox=0,
	 soy=0,
	 flp=false,
	 mov=nil,
	 ani={}
	}
	for i=0,2 do
		add(s.ani,unit_ani[typ]+(i*2))
	end
	add(slimes,s)
end
__gfx__
00000000777777711777777711111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700055711755000717777777777777710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700707777711777770717000557755000710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000707111111111170717077777777770710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000757111111111175717071111111170710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700757111111111175717571111111175710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777111111111177717571111111175710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111111111111117771111111177710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111111111111117771111111177710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777111111111177717571111111175710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000757111111111175717571111111175710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000757111111111175717071111111170710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000707111111111170717077777777770710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000707777711777770717000557755000710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700055711755000717777777777777710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777711777777711111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111777777771111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
11117777777711111111766666671111111177777777111100000000000000000000000000000000000000000000000000000000000000000000000000000000
11117666666711111177766666677711111176666667111100000000000000000000000000000000000000000000000000000000000000000000000000000000
11777666666777111176600666666711117776666667771100000000000000000000000000000000000000000000000000000000000000000000000000000000
11766006666667117776600666666777117660066666671100000000000000000000000000000000000000000000000000000000000000000000000000000000
77766006666667777660066666666667777660066666677700000000000000000000000000000000000000000000000000000000000000000000000000000000
76600666666666677660066666666667766006666666666700000000000000000000000000000000000000000000000000000000000000000000000000000000
76600666666666677666666666666667766006666666666700000000000000000000000000000000000000000000000000000000000000000000000000000000
76666666666666677666666666666667766666666666666700000000000000000000000000000000000000000000000000000000000000000000000000000000
76666666666666677776666666666777766666666666666700000000000000000000000000000000000000000000000000000000000000000000000000000000
77766666666667771176666666666711777666666666677700000000000000000000000000000000000000000000000000000000000000000000000000000000
11766666666667111177777777777711117666666666671100000000000000000000000000000000000000000000000000000000000000000000000000000000
11777777777777111111111111111111117777777777771100000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
11111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142414241424142414241424142414200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152515251525152515251525152515200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
